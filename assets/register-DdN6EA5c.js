import{J as S,aq as M,Y as _,P as q,O as B,L as l,i as o,al as g,ar as F,X as a,am as t,V as U,R as A}from"./index-Dt_xTd2y.js";import{c as E,a as n,d as N,u as P,b as u}from"./index.esm-BQzqhDF6.js";import{v as V}from"./index-DzzzlDvu.js";import{b as v}from"./route-block-B_A1xBdJ.js";import{V as b,a as w}from"./VRow-DEnxfJNx.js";import{V as R}from"./VDivider-Dl-ohCUP.js";import{V as $}from"./VForm-DfT-FKfZ.js";import{V as j}from"./VContainer-hbJBMmJK.js";const O={class:"text-center"},T={__name:"register",setup(D){const{api:x}=_(),p=S(),h=M(),y=E({account:n().required("必填").min(4,"最少4個字").max(20,"最多20個字").test("isAlphanumeric","使用者帳號格式不正確",r=>V.isAlphanumeric(r)),email:n().required("必填").test("isEmail","使用者信箱格式不正確",r=>V.isEmail(r)),password:n().required("必填").min(4,"密碼太短").max(20,"密碼太長"),passwordConfirm:n().oneOf([N("password")],"密碼不符")}),{handleSubmit:k,isSubmitting:f}=P({validationSchema:y}),m=u("account"),i=u("email"),d=u("password"),c=u("passwordConfirm"),C=k(async r=>{var e;try{await x.post("/user",{account:r.account,email:r.email,password:r.password}),p({text:"註冊成功",snackbarProps:{color:"green"}}),h.push("/login")}catch(s){console.log(s),p({text:((e=s==null?void 0:s.response)==null?void 0:e.data.message)||"unknownError",snackbarProps:{color:"red"}})}});return(r,e)=>(B(),q(j,null,{default:l(()=>[o(b,{justify:"center"},{default:l(()=>[o(w,{cols:"12"},{default:l(()=>e[4]||(e[4]=[g("h1",{class:"text-center"},"註冊",-1)])),_:1}),o(R)]),_:1}),o(b,{justify:"center",style:{height:"500px"}},{default:l(()=>[o(w,{cols:"6","align-self":"center"},{default:l(()=>[o($,{disabled:a(f),onSubmit:F(a(C),["prevent"])},{default:l(()=>[o(t,{modelValue:a(m).value.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a(m).value.value=s),"error-messages":a(m).errorMessage.value,label:"帳號",minlength:"4",maxlength:"20",counter:"",class:"mb-1"},null,8,["modelValue","error-messages"]),o(t,{modelValue:a(i).value.value,"onUpdate:modelValue":e[1]||(e[1]=s=>a(i).value.value=s),"error-messages":a(i).errorMessage.value,label:"信箱"},null,8,["modelValue","error-messages"]),o(t,{modelValue:a(d).value.value,"onUpdate:modelValue":e[2]||(e[2]=s=>a(d).value.value=s),type:"password","error-messages":a(d).errorMessage.value,label:"密碼",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),o(t,{modelValue:a(c).value.value,"onUpdate:modelValue":e[3]||(e[3]=s=>a(c).value.value=s),type:"password","error-messages":a(c).errorMessage.value,label:"確認密碼",minlength:"4",maxlength:"20",counter:"",class:"mb-5"},null,8,["modelValue","error-messages"]),g("div",O,[o(U,{loading:a(f),type:"submit",color:"white"},{default:l(()=>e[5]||(e[5]=[A("註冊")])),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof v=="function"&&v(T);export{T as default};
