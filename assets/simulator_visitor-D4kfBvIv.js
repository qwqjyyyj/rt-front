import{V as b,s as A,l as P,a as H,b as j,r as k,c as L,d as D}from"./transform-C0y39mrF.js";import{b as E}from"./route-block-B_A1xBdJ.js";import{r as V,o as I,b as W,w as q,P as G,O as J,L as a,i as e,bj as K,bk as Q,al as M,bl as X,am as w,V as F,R,T as Y}from"./index-Dt_xTd2y.js";import{V as v,a as _}from"./VRow-DEnxfJNx.js";import{V as Z}from"./VContainer-hbJBMmJK.js";const C=600,S=300,$=50,tt={__name:"simulator_visitor",setup(et){const i={amplitude:30,wavelength:2,offset:0},T=V(null),n=V(i.amplitude),s=V(i.wavelength),r=V(i.offset),m=V(!1);let p,f,x,g,y,c,U;const u={top:20,right:20,bottom:40,left:50};let d=0,B;function N(){p=A(T.value).append("svg").attr("width",C+u.left+u.right).attr("height",S+u.top+u.bottom).append("g").attr("transform",`translate(${u.left},${u.top})`),f=P().domain([0,10]).range([0,C]),x=P().domain([-50,70]).range([S,0]),p.append("g").attr("class","y-axis").call(H(x)),U=p.append("g").attr("class","x-axis").attr("transform",`translate(0, ${S})`).call(j(f).tickValues(k(0,11,1)).tickSize(-5).tickFormat("")),p.append("line").attr("x1",0).attr("x2",C).attr("y1",x(0)).attr("y2",x(0)).attr("stroke","black").attr("stroke-width",1),g=L().x(o=>f(o.x)).y(o=>x(o.y+r.value)).curve(D),c=k(101).map(o=>({x:o*(10/100),y:0})),y=p.append("path").datum(c).attr("class","wave").attr("fill","none").attr("stroke","blue").attr("stroke-width",2),h()}function h(){m.value||(d+=$/1e3,c.forEach((o,t)=>{o.x=d-(100-t)*(10/100),o.y=n.value*Math.sin(o.x*2*Math.PI/s.value)}),f.domain([d-10,d]),y.datum(c).attr("d",g),U.call(j(f).tickValues(k(Math.floor(d)-9,Math.floor(d)+1,1)).tickSize(-5).tickFormat("")),B=setTimeout(h,$))}function O(){m.value=!m.value,m.value||h()}function z(){n.value=i.amplitude,s.value=i.wavelength,r.value=i.offset}return I(()=>{N()}),W(()=>{clearTimeout(B)}),q([n,s,r],()=>{y.datum(c).attr("d",g)}),(o,t)=>(J(),G(Z,null,{default:a(()=>[e(K,null,{default:a(()=>[e(Q,{class:"text-center"},{default:a(()=>t[6]||(t[6]=[M("h3",null,"呼吸器波形",-1)])),_:1}),e(X,null,{default:a(()=>[M("div",{ref_key:"chart",ref:T,class:"chart-container",style:{"text-align":"center"}},null,512),e(v,{justify:"center",style:{"margin-top":"4px"}},{default:a(()=>[e(_,{cols:"7",style:{padding:"0px",height:"55px"}},{default:a(()=>[e(b,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=l=>n.value=l),min:"0",max:"50",step:"1",label:"PRESSURE(cmH2O)"},{append:a(()=>[e(w,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l),type:"number",style:{width:"70px"},dense:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(v,{justify:"center",style:{"margin-top":"18px"}},{default:a(()=>[e(_,{cols:"7",style:{padding:"0px",height:"55px"}},{default:a(()=>[e(b,{modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value=l),min:"0",max:"10",step:"0.1",label:"Ti(sec.)"},{append:a(()=>[e(w,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value=l),type:"number",style:{width:"70px"},dense:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(v,{justify:"center",style:{"margin-top":"18px"}},{default:a(()=>[e(_,{cols:"7",style:{padding:"0px",height:"55px"}},{default:a(()=>[e(b,{modelValue:r.value,"onUpdate:modelValue":t[5]||(t[5]=l=>r.value=l),min:"0",max:"20",step:"1",label:"PEEP(cmH2O)"},{append:a(()=>[e(w,{modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=l=>r.value=l),type:"number",style:{width:"70px"},dense:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(v,{justify:"center",style:{"margin-top":"25px"}},{default:a(()=>[e(F,{color:"primary",onClick:O},{default:a(()=>[R(Y(m.value?"開始":"暫停"),1)]),_:1}),e(F,{color:"secondary",style:{"margin-left":"10px"},onClick:z},{default:a(()=>t[7]||(t[7]=[R("重設")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};typeof E=="function"&&E(tt);export{tt as default};
