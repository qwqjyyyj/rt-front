import{p as R,r as E,s as k,c as o,a as te,w as C,o as ae,b as le,g as A,u as oe,d as G,e as J,f as K,t as H,h as M,m as Q,i as r,j as se,k as re,l as ne,n as ue,q as ie,v as ce,x as ve,y as de,z as X,A as me,B as fe,C as Z,D as ge,E as he,F as ye,G as Se,H as pe,I as be,J as Ve,K as _,L as l,M as x,N as ke,O as h,P,Q as N,V as w,R as S,S as L,T as I,U,W as O,X as _e,Y as xe,Z as we}from"./index-7WHT3BMN.js";import{m as Be,V as D,a as j,b as q,c as W,d as Y}from"./VMenu-CUVv4VTu.js";import{u as $}from"./ssrBoot-duMRrz21.js";import{V as Pe}from"./VContainer-7ZedbbTK.js";import{V as Ie,a as Te}from"./VRow-DT9y_4HD.js";import"./VDivider-HDWTKmgr.js";const Ce=R({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Le(e){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:u}=d;let g=0,m=0;const a=E(null),c=k(0),i=k(0),y=k(0),p=k(!1),v=k(!1),s=o(()=>Number(e.scrollThreshold)),b=o(()=>te((s.value-c.value)/s.value||0)),t=()=>{const f=a.value;if(!f||u&&!u.value)return;g=c.value,c.value="window"in f?f.pageYOffset:f.scrollTop;const V=f instanceof Window?document.documentElement.scrollHeight:f.scrollHeight;if(m!==V){m=V;return}v.value=c.value<g,y.value=Math.abs(c.value-s.value)};return C(v,()=>{i.value=i.value||c.value}),C(p,()=>{i.value=0}),ae(()=>{C(()=>e.scrollTarget,f=>{var T;const V=f?document.querySelector(f):window;V&&V!==a.value&&((T=a.value)==null||T.removeEventListener("scroll",t),a.value=V,a.value.addEventListener("scroll",t,{passive:!0}))},{immediate:!0})}),le(()=>{var f;(f=a.value)==null||f.removeEventListener("scroll",t)}),u&&C(u,t,{immediate:!0}),{scrollThreshold:s,currentScroll:c,currentThreshold:y,isScrollActive:p,scrollRatio:b,isScrollingUp:v,savedScroll:i}}const He=R({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Be(),...Q(),...Ce(),height:{type:[Number,String],default:64}},"VAppBar"),Re=A()({name:"VAppBar",props:He(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:u}=d;const g=E(),m=oe(e,"modelValue"),a=o(()=>{var B;const n=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:n.has("hide"),fullyHide:n.has("fully-hide"),inverted:n.has("inverted"),collapse:n.has("collapse"),elevate:n.has("elevate"),fadeImage:n.has("fade-image")}}),c=o(()=>{const n=a.value;return n.hide||n.fullyHide||n.inverted||n.collapse||n.elevate||n.fadeImage||!m.value}),{currentScroll:i,scrollThreshold:y,isScrollingUp:p,scrollRatio:v}=Le(e,{canScroll:c}),s=o(()=>a.value.hide||a.value.fullyHide),b=o(()=>e.collapse||a.value.collapse&&(a.value.inverted?v.value>0:v.value===0)),t=o(()=>e.flat||a.value.fullyHide&&!m.value||a.value.elevate&&(a.value.inverted?i.value>0:i.value===0)),f=o(()=>a.value.fadeImage?a.value.inverted?1-v.value:v.value:void 0),V=o(()=>{var z,F;if(a.value.hide&&a.value.inverted)return 0;const n=((z=g.value)==null?void 0:z.contentHeight)??0,B=((F=g.value)==null?void 0:F.extensionHeight)??0;return s.value?i.value<y.value||a.value.fullyHide?n+B:n:n+B});G(o(()=>!!e.scrollBehavior),()=>{J(()=>{s.value?a.value.inverted?m.value=i.value>y.value:m.value=p.value||i.value<y.value:m.value=!0})});const{ssrBootStyles:T}=$(),{layoutItemStyles:ee}=K({id:e.name,order:o(()=>parseInt(e.order,10)),position:H(e,"location"),layoutSize:V,elementSize:k(void 0),active:m,absolute:H(e,"absolute")});return M(()=>{const n=D.filterProps(e);return r(D,se({ref:g,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...ee.value,"--v-toolbar-image-opacity":f.value,height:void 0,...T.value},e.style]},n,{collapse:b.value,flat:t.value}),u)}),{}}}),Ee=R({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ge(),...Z(),...fe(),...Q(),...me(),...X({tag:"footer"}),...de()},"VFooter"),Ae=A()({name:"VFooter",props:Ee(),setup(e,d){let{slots:u}=d;const g=E(),{themeClasses:m}=re(e),{backgroundColorClasses:a,backgroundColorStyles:c}=ne(H(e,"color")),{borderClasses:i}=ue(e),{elevationClasses:y}=ie(e),{roundedClasses:p}=ce(e),v=k(32),{resizeRef:s}=ve(t=>{t.length&&(v.value=t[0].target.clientHeight)}),b=o(()=>e.height==="auto"?v.value:parseInt(e.height,10));return G(()=>e.app,()=>{const t=K({id:e.name,order:o(()=>parseInt(e.order,10)),position:o(()=>"bottom"),layoutSize:b,elementSize:o(()=>e.height==="auto"?void 0:b.value),active:o(()=>e.app),absolute:H(e,"absolute")});J(()=>{g.value=t.layoutItemStyles.value})}),M(()=>r(e.tag,{ref:s,class:["v-footer",m.value,a.value,i.value,y.value,p.value,e.class],style:[c.value,e.app?g.value:{height:he(e.height)},e.style]},u)),{}}}),Me=R({scrollable:Boolean,...Z(),...pe(),...X({tag:"main"})},"VMain"),ze=A()({name:"VMain",props:Me(),setup(e,d){let{slots:u}=d;const{dimensionStyles:g}=ye(e),{mainStyles:m}=Se(),{ssrBootStyles:a}=$();return M(()=>r(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[m.value,a.value,g.value,e.style]},{default:()=>{var c,i;return[e.scrollable?r("div",{class:"v-main__scroller"},[(c=u.default)==null?void 0:c.call(u)]):(i=u.default)==null?void 0:i.call(u)]}})),{}}}),qe={__name:"default",setup(e){const d=be(),{apiAuth:u}=xe(),g=Ve(),m=o(()=>[{to:"/contact",text:"聯絡",icon:"",show:!0},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!d.isLoggedIn},{to:"/login",text:"登入",icon:"mdi-account-arrow-left",show:!d.isLoggedIn},{to:"/person",text:"個人檔案",icon:"mdi-account",show:d.isLoggedIn}]),a=o(()=>[{to:"/simulator_ins",title:"操作說明",if:!0},{to:"/simulator_visitor",title:"遊客介面",if:!d.isLoggedIn},{to:"/simulator",title:"介面",if:d.isLoggedIn}]),c=o(()=>a.value.filter(v=>v.if)),i=o(()=>[{to:"/game_ins",title:"遊玩說明"},{to:"/game",title:"遊戲區"}]),y=async()=>{try{await u.delete("/user/logout")}catch(v){console.log(v)}d.logout(),g({text:"登出成功",snackbarProps:{color:"green"}}),we.push("/")},p=o(()=>[{to:"/",text:"首頁"},{to:"/",text:"呼吸器模擬"},{to:"/",text:"小遊戲"},{to:"/",text:"聯絡"}]);return(v,s)=>{const b=ke("router-view");return h(),_(x,null,[r(Re,{elevation:0},{default:l(()=>[r(Pe,{class:"d-flex justify-center"},{default:l(()=>[r(w,{to:"/",active:!1},{default:l(()=>s[0]||(s[0]=[S("首頁")])),_:1}),r(j,{"open-on-hover":""},{activator:l(({props:t})=>[r(w,U(O(t)),{default:l(()=>s[1]||(s[1]=[S("呼吸器模擬 ⌵")])),_:2},1040)]),default:l(()=>[r(q,null,{default:l(()=>[(h(!0),_(x,null,L(c.value,t=>(h(),P(W,{key:t.to,to:t.to},{default:l(()=>[r(Y,null,{default:l(()=>[S(I(t.title),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1}),r(j,{"open-on-hover":""},{activator:l(({props:t})=>[r(w,U(O(t)),{default:l(()=>s[2]||(s[2]=[S("小遊戲 ⌵")])),_:2},1040)]),default:l(()=>[r(q,null,{default:l(()=>[(h(!0),_(x,null,L(i.value,t=>(h(),P(W,{key:t.to,to:t.to},{default:l(()=>[r(Y,null,{default:l(()=>[S(I(t.title),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1}),(h(!0),_(x,null,L(m.value,t=>(h(),_(x,{key:t.to},[t.show?(h(),P(w,{key:0,to:t.to,"prepend-icon":t.icon},{default:l(()=>[S(I(t.text),1)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),_e(d).isLoggedIn?(h(),P(w,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:y},{default:l(()=>s[3]||(s[3]=[S(I("登出"))])),_:1})):N("",!0)]),_:1})]),_:1}),r(ze,null,{default:l(()=>[r(b)]),_:1}),r(Ae,{class:"bg-grey-lighten-1"},{default:l(()=>[r(Ie,{justify:"left","no-gutters":""},{default:l(()=>[(h(!0),_(x,null,L(p.value,t=>(h(),P(w,{key:t.to,to:t.to,class:"mx-2",color:"",rounded:"xl",variant:"text",active:!1},{default:l(()=>[S(I(t.text),1)]),_:2},1032,["to"]))),128)),r(Te,{class:"text-right mt-4",cols:"12"},{default:l(()=>s[4]||(s[4]=[S("yyOuOyy")])),_:1})]),_:1})]),_:1})],64)}}};export{qe as default};
